import{a as u}from"./chunk-QBUWP7NA.mjs";import{a as m}from"./chunk-N6ZU3WNV.mjs";import{b as f}from"./chunk-ETCR2PPB.mjs";import{a as i}from"./chunk-YSXGDEY5.mjs";var p=class{static{i(this,"PluginBase")}name;toolProviders;constructor(o,r){this.name=o,this.toolProviders=r}getTools(o){let r=[];for(let n of this.toolProviders){let a=Reflect.getMetadata(c,n.constructor);if(!a){let e=n.constructor.name;console.warn(e==="Function"?"Detected a non-instance tool provider. Please ensure you're passing instances of your tool providers, by using `new MyToolProvider(..)`":`No tools found for ${e}. Please ensure you're using the '@Tool' decorator to expose your tools.`);continue}for(let e of a.values())r.push(f({name:e.name,description:e.description,parameters:e.parameters.schema},s=>{let l=[];return e.walletClient&&(l[e.walletClient.index]=o),l[e.parameters.index]=s,e.target.apply(n,l)}))}return r}};import"reflect-metadata";var c=Symbol("goat:tool");function W(t){return(o,r,n)=>{let{parameters:a,walletClient:e}=w(o,r),s=Reflect.getMetadata(c,o.constructor)||new Map;return s.set(r,{target:n.value,name:t.name??u(r),description:t.description,parameters:a,...e?{walletClient:e}:{}}),Reflect.defineMetadata(c,s,o.constructor),o}}i(W,"Tool");function w(t,o){let r=t instanceof Object?t.constructor.name:void 0,n=`Method '${o}'${r?` on class '${r}'`:""}`,a="Tool methods must have at least one parameter that is a Zod schema class created with the createToolParameters function.",e=Reflect.getMetadata("design:paramtypes",t,o);if(e==null)throw new Error(`Failed to get parameters for ${n}.`);if(e.length===0)throw new Error(`${n} has no parameters. ${a}`);if(e.length>2)throw new Error(`${n} has ${e.length} parameters. ${a}`);let s=e.find(P);if(s==null)throw new Error(`${n} has no parameters parameter.

1.) ${a}

2.) Ensure that you are not using 'import type' for the parameters.`);let l=e.find(x);return{parameters:{index:e.indexOf(s),schema:s.prototype.constructor.schema},...l?{walletClient:{index:e.indexOf(l)}}:{}}}i(w,"validateMethodParameters");function x(t){return!t||!t.prototype?!1:t===m?!0:t.prototype instanceof m}i(x,"isWalletClientParameter");function P(t){return t.prototype?.constructor?.schema!=null}i(P,"isParametersParameter");export{c as a,W as b,p as c};
